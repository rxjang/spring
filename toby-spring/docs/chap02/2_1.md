# Chap 02 테스트
* 스프링이 강조하고 가치를 두고 있는 것중 하나가 **테스트**
* 테스트는 만들어진 코드를 확신할 수 있게 해주고, 변화에 유연하게 대처할 수 있는 자신감을 주는 기술

### 학습 목표
* 테스트란 무엇인가
* 테스트의 가치와 장점, 활용 전략
* 테스트와 스프링과의 관계
* 대표적인 테스트 프레임워크와 이를 활용한 전략

# 2.1 UserDaoTest 다시 보기
## 2.1.1 테스트의 유용성
### 테스트란
* 예상하고 의도했던 대로 코드가 정확히 동작하는지를 확인해서, 만든 코드를 확신할 수 있게 해주는 작업
* 테스트의 결과가 원하는 대로 나오지 않는 경우에는 코드나 설계에 결함이 있음을 알 수 있음

## 2.1.2 UserDaoTest의 특징
1장에서 만들었던 main() 메소드의 테스트 코드를 다시한번 살펴 보자.
``` java
public class UserDaoTest {

    public static void main(String[] args) throws SQLException {
        ApplicationContext context = new GenericXmlApplicationContext("applicationContext.xml");
        UserDao dao = context.getBean("userDao", UserDao.class);

        User user = new User();
        user.setId("felix");
        user.setName("용복");
        user.setPassword("felixlee");

        dao.add(user);

        System.out.println(user.getId() + " 등록 성공");

        User user2 = dao.get(user.getId());
        System.out.println(user2.getName());
        System.out.println(user2.getPassword());

        System.out.println(user2.getId() + " 조회 성공");
    }
}
```
이 테스트 방법에서 가장 돋보이는 점은 main() 메소드를 이용해 쉽게 테스트 수행을 했다는 점과 테스트할 대상인 UserDao를 직접 호출해서 사용한다는 점이다.

### 웹을 통한 DAO 테스트 방법의 문제점
웹 화면을 통해 테스트를 하는 방법은 가장 흔히 쓰이지만 단점이 많다. DAO뿐만 아니라 서비스 클래스, 컨트롤러, JSP 뷰 등 모든 레이어의 기능을 다 만들고 나서야 테스트가 가능하다. 테스트 중 에러가 나면 어디서 문제가 발생했는지 찾아야 한다. 

### 작은 단위의 테스트
테스트는 그 대상에만 집중하는것이 바람직하다. 한 번에 많은 것을 몰아서 테스트 하면 수행 과정도 복잡해지고, 오류가 발생했을 때 정확한 원인을 찾기 힘들다. 따라서 테스트는 가능한 작은 단위로 쪼개서 집중해야한다. 
> 단위테스트: 작은 단위의 코드에 대해 테스트를 수행한 것  

* 단위는 작을수록 좋음
* 개발자가 설계하고 만든 코드가 원래 의도한 대로 동작하는지 확인

### 자동수행 테스트 코드
테스트는 자동으로 수행되도록 만들어지는 것이 즁요하다. 테스트 코드는 별도로 테스트용 클래스를 만들어 테스트 코드를 넣는 편이 낫다.  
자동으로 수행되는 테스트의 장점은 자주 반복할 수 있다는 것이다. 번거로운 작업이 없고 테스트를 빠르게 실행할 수 있기 때문에 언제든 코드를 수종하고 나서 테스트를 해 볼 수 있다. 

### 지속적인 개선과 점진적인 개발을 위한 테스트
처음 만든 초난감 DAO 코드를, 스프링을 이용한 깔끔하고 완성도 높은 객체지향적 코드로 발전시키는데에 테스트가 많은 도움을 주었다. 일단 가장 잔순한 방법으로 DAO 코드를 만들어 DAO로서의 기능에 문제가 없는지 테스트를 코드의 변경마다 실행해보았기 때문에 무엇이 잘못되었는지 마로 확인할 수 있었다.

## 2.1.3 UserDaoTest의 문제점
* 수동 확인 작업의 번거로움  
UserDaoTest는 입력한 값과 가져온 값이 일치하는지 확인해 주지 않는다. 콘솔에 찍힌 값을 보고 직접 확인해야한다. 이런 방식은 실수를 야기할 수 있다.
* 실행 작업의 번거로움  
만약 DAO가 수백 개가 되고 그에 대한 main() 메소드도 그만큼 만들어 진다면, 전체 테스트를 위해 이 메소드를 수백 번 실행해야한다.  